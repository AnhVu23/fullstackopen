(this.webpackJsonpexercise_2_6=this.webpackJsonpexercise_2_6||[]).push([[0],{21:function(e,n,t){},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(2),o=t.n(r),a=t(15),s=t.n(a),u=(t(21),t(6)),i=t(3),h=t(4),l=t.n(h),j="api/persons",d=(t(39),function(e){var n=e.search,t=e.onSearchChange;return Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{value:n,onChange:t})]})}),b=function(e){var n=e.onFormSubmit,t=e.newName,r=e.newPhoneNum,o=e.onNewNameChange,a=e.onNewPhoneChange;return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsx)("h2",{children:"Add a new"}),Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:t,onChange:o})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:r,onChange:a})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var n=e.persons,t=e.search,r=e.onDeletePerson;return n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(c.jsxs)("div",{className:"flex",children:[Object(c.jsxs)("p",{children:[e.name," ",e.number]},e.name),Object(c.jsx)("button",{onClick:function(){return r(e)},children:Object(c.jsx)("span",{children:"delete"})})]})}))},m=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],a=Object(r.useState)(""),s=Object(i.a)(a,2),h=s[0],m=s[1],O=Object(r.useState)(""),x=Object(i.a)(O,2),p=x[0],v=x[1],w=Object(r.useState)(""),g=Object(i.a)(w,2),N=g[0],C=g[1],S=Object(r.useState)(null),P=Object(i.a)(S,2),k=P[0],y=P[1],D=Object(r.useState)(null),_=Object(i.a)(D,2),A=_[0],E=_[1];Object(r.useEffect)((function(){I()}),[]);var I=function(){l.a.get(j).then((function(e){return e.data})).catch((function(e){throw e})).then((function(e){o(e)})).catch((function(e){E(e.response.data.error),console.error(e)}))};return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("h2",{children:"Phonebook"}),k?Object(c.jsx)("div",{className:"success-message-box",children:Object(c.jsx)("p",{className:"success-message-text",children:k})}):null,A?Object(c.jsx)("div",{className:"error-message-box",children:Object(c.jsx)("p",{className:"error-message-text",children:A})}):null,Object(c.jsx)(d,{search:N,onSearchChange:function(e){return C(e.target.value)}}),Object(c.jsx)(b,{onFormSubmit:function(e){e.preventDefault();var n,c,r=t.findIndex((function(e){return e.name===h}));if(r>-1)window.confirm("".concat(h," is already added to phonebook, replace the old number with a new one"))&&(n=t[r].id,c=Object(u.a)(Object(u.a)({},t[r]),{},{number:p}),l.a.put("".concat(j,"/").concat(n),c).then((function(e){return console.log(e),e})).catch((function(e){throw e}))).then((function(e){m(""),v(""),I(),y("Edited ".concat(t[r].name)),setTimeout((function(){return y(null)}),3e3)})).catch((function(e){console.log(e),E(e.response.data.error)}));else{var o={name:h,number:p};(function(e){return l.a.post(j,e).then((function(e){return e})).catch((function(e){throw e}))})(o).then((function(e){I(),m(""),v(""),y("Added ".concat(o.name)),setTimeout((function(){return y(null)}),3e3)})).catch((function(e){console.error(e),E(e.response.data.error)}))}},newName:h,newPhoneNum:p,onNewNameChange:function(e){return m(e.target.value)},onNewPhoneChange:function(e){return v(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(f,{search:N,persons:t,onDeletePerson:function(e){var n;window.confirm("Delete ".concat(e.name,"?"))&&(n=e.id,l.a.delete("".concat(j,"/").concat(n)).then((function(e){return e})).catch((function(e){throw e}))).then((function(e){I()})).catch((function(n){404===n.response.status&&(E("Information of ".concat(e.name," has already been removed from server")),setTimeout((function(){return E(null)}),3e3)),E(n.response.data.error),console.error(n)}))}})]})};s.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(m,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f4d18d94.chunk.js.map